{"pageProps":{"post":{"title":"[Go]構造体の配列からJSONにパース","date":"2021-05-04T15:17:07.322+09:00","slug":"go-sql","author":{"name":"ろい","picture":"https://github.com/rrih.png"},"content":"<p>GoでMySQLと接続</p>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">dbConn</span><span class=\"hljs-params\">()</span> <span class=\"hljs-params\">(db *sql.DB)</span></span> {\n\terr := godotenv.Load(fmt.Sprintf(<span class=\"hljs-string\">\"./%s.env\"</span>, os.Getenv(<span class=\"hljs-string\">\"GO_ENV\"</span>)))\n\t<span class=\"hljs-keyword\">if</span> err != <span class=\"hljs-literal\">nil</span> {\n\t\tfmt.Println(<span class=\"hljs-string\">\"env err\"</span>)\n\t}\n\tdbDriver := <span class=\"hljs-string\">\"mysql\"</span>\n\tdbUser := os.Getenv(<span class=\"hljs-string\">\"DB_USER\"</span>)\n\tdbPass := os.Getenv(<span class=\"hljs-string\">\"DB_PASSWORD\"</span>)\n\tdbName := <span class=\"hljs-string\">\"gosrc\"</span>\n\tdb, openErr := sql.Open(dbDriver, dbUser+<span class=\"hljs-string\">\":\"</span>+dbPass+<span class=\"hljs-string\">\"@/\"</span>+dbName)\n\t<span class=\"hljs-keyword\">if</span> openErr != <span class=\"hljs-literal\">nil</span> {\n\t\tlog.Fatal(openErr.Error())\n\t}\n\t<span class=\"hljs-keyword\">return</span> db\n}</code></pre>\n<p>こんな雰囲気で<br>\ndbConn()の返り値を各db読み書きの処理の前に変数<code>db</code>に入れればよい？<br>\nディレクトリどう切ってくかとかわかってない</p>\n<h2>参考文献</h2>\n<ul>\n<li><a href=\"https://blog.p1ass.com/posts/go-database-sql-wrapper\">https://blog.p1ass.com/posts/go-database-sql-wrapper</a></li>\n</ul>\n","ogImage":{"url":"https://pbs.twimg.com/profile_banners/636879657/1606257712/1500x500"},"coverImage":"https://pbs.twimg.com/profile_banners/636879657/1606257712/1500x500"}},"__N_SSG":true}