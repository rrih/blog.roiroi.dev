{"pageProps":{"post":{"title":"CakePHP[2/4] インタラクティブ・コンソール (REPL) 使い方","date":"2021-04-28T01:02:07.322+09:00","slug":"cakephp-repl","author":{"name":"ろい","picture":"https://github.com/rrih.png"},"content":"<h3>CakePHP の REPL とは？</h3>\n<p>rails console の CakePHP 版のようなものです。ORM で DB アクセスもできたりします。<br>\nCakePHP 上のコントローラなどからメソッドや変数を呼び出せるし、PHP の組み込み関数を呼び出すのもできます。</p>\n<p>CakePHP でバッチやサービスメソッドなど作る際のデバッグとかで使えます</p>\n<h3>cakephp2系の場合</h3>\n<p>起動、メソッド等の実行について</p>\n<pre><code class=\"hljs language-bash\">$ ./Console/cake console\n>>>\n>>> <span class=\"hljs-variable\">$hoge</span> = Cake\\Lib\\SomeDomain\\Repository\\HogeRepository::getInstance()->get(1);\n>>> Cake\\Lib\\SomeDomain\\Service\\HogeFugaService::createHogeUser(<span class=\"hljs-variable\">$hoge</span>);</code></pre>\n<h3>cakephp4 の場合</h3>\n<p>起動、メソッド等の実行について</p>\n<pre><code class=\"hljs language-bash\">$ bin/cake console\nYou can <span class=\"hljs-built_in\">exit</span> with `CTRL-C` or `<span class=\"hljs-built_in\">exit</span>`\n\n>>>\n>>> <span class=\"hljs-variable\">$a</span> = Carbon\\Carbon::now();\n=> Carbon\\Carbon @1619531645 {<span class=\"hljs-comment\">#2618</span>\n     date: 2021-04-27 22:54:05.862774 Asia/Tokyo (+09:00),\n   }\n>>> Cake\\ORM\\TableRegistry::get(<span class=\"hljs-string\">'Users'</span>);\n=> App\\Model\\Table\\UsersTable {<span class=\"hljs-comment\">#2648</span>\n     registryAlias: <span class=\"hljs-string\">\"Users\"</span>,\n     table: <span class=\"hljs-string\">\"users\"</span>,\n     <span class=\"hljs-built_in\">alias</span>: <span class=\"hljs-string\">\"Users\"</span>,\n     entityClass: <span class=\"hljs-string\">\"App\\Model\\Entity\\User\"</span>,\n     associations: [\n         ...</code></pre>\n<p>雰囲気こんな感じ<br>\nまた、privateなのとかは呼び出せません</p>\n<h3>参考文献</h3>\n<ul>\n<li><a href=\"https://book.cakephp.org/2/ja/console-and-shells/repl.html\">https://book.cakephp.org/2/ja/console-and-shells/repl.html</a></li>\n<li><a href=\"https://book.cakephp.org/4/ja/console-and-shells/repl.html\">https://book.cakephp.org/4/ja/console-and-shells/repl.html</a></li>\n</ul>\n","ogImage":{"url":"https://pbs.twimg.com/profile_banners/636879657/1606257712/1500x500"},"coverImage":"https://pbs.twimg.com/profile_banners/636879657/1606257712/1500x500"}},"__N_SSG":true}