{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/20201225-mysql-add-column/","result":{"data":{"site":{"siteMetadata":{"title":"rrih"}},"markdownRemark":{"id":"ac25cc24-b4e9-52b6-80de-dbf2b12c37cd","excerpt":"結論 自分の場合、カラム名にをつけたら解決した 実際の例 boolean 型のカラムを追加しようとして以下を実行 出力されたエラ〜メッセージが以下 頭に is をつけないといけないらしい… という boolean カラムを追加しようとして上記ようなエラーで時間溶かしてた。今回はとして解決。 なお boolean…","html":"<h2>結論</h2>\n<p>自分の場合、カラム名に<code class=\"language-text\">is</code>をつけたら解決した</p>\n<h2>実際の例</h2>\n<p>boolean 型のカラムを追加しようとして以下を実行</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mysql<span class=\"token operator\">></span> alter table foo_table_name modify is_bar boolean not null default <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>出力されたエラ〜メッセージが以下</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ERROR <span class=\"token number\">1064</span> <span class=\"token punctuation\">(</span><span class=\"token number\">42000</span><span class=\"token punctuation\">)</span>: You have an error <span class=\"token keyword\">in</span> your SQL syntax<span class=\"token punctuation\">;</span> check the manual that corresponds to your MySQL server version <span class=\"token keyword\">for</span> the right syntax to use near <span class=\"token string\">'read boolean'</span> at line <span class=\"token number\">1</span></code></pre></div>\n<p>頭に is をつけないといけないらしい…</p>\n<p><code class=\"language-text\">read</code>という boolean カラムを追加しようとして上記ようなエラーで時間溶かしてた。今回は<code class=\"language-text\">is_read</code>として解決。<br>\nなお boolean 型というのはないらしく、</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mysql<span class=\"token operator\">></span> desc notifications<span class=\"token punctuation\">;</span>\n+------------+------------------+------+-----+---------+----------------+\n<span class=\"token operator\">|</span> Field      <span class=\"token operator\">|</span> Type             <span class=\"token operator\">|</span> Null <span class=\"token operator\">|</span> Key <span class=\"token operator\">|</span> Default <span class=\"token operator\">|</span> Extra          <span class=\"token operator\">|</span>\n+------------+------------------+------+-----+---------+----------------+\n<span class=\"token operator\">|</span> <span class=\"token function\">id</span>         <span class=\"token operator\">|</span> int<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> unsigned <span class=\"token operator\">|</span> NO   <span class=\"token operator\">|</span> PRI <span class=\"token operator\">|</span> NULL    <span class=\"token operator\">|</span> auto_increment <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> message_id <span class=\"token operator\">|</span> int<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> unsigned <span class=\"token operator\">|</span> NO   <span class=\"token operator\">|</span>     <span class=\"token operator\">|</span> NULL    <span class=\"token operator\">|</span>                <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> like_id    <span class=\"token operator\">|</span> int<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> unsigned <span class=\"token operator\">|</span> NO   <span class=\"token operator\">|</span>     <span class=\"token operator\">|</span> NULL    <span class=\"token operator\">|</span>                <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> is_read    <span class=\"token operator\">|</span> tinyint<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>       <span class=\"token operator\">|</span> YES  <span class=\"token operator\">|</span>     <span class=\"token operator\">|</span> NULL    <span class=\"token operator\">|</span>                <span class=\"token operator\">|</span>\n+------------+------------------+------+-----+---------+----------------+</code></pre></div>\n<p>boolean と指定してカラムを追加した場合、<code class=\"language-text\">tinyint(1)</code>という型になっている。\nこの<code class=\"language-text\">1</code>は<code class=\"language-text\">1bit</code>を示していて、この型のデータは 0 か 1 のみが入る。</p>\n<p>正直あまり深くは知らない。。。0 か 1 のみが入るというのはそれ以外の型のデータを insert しようとしたらどうなるんだろう。</p>\n<h2>ということで雑に試した結果</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mysql<span class=\"token operator\">></span> insert into notifications values <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>, <span class=\"token number\">1</span>, <span class=\"token number\">1</span>, <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span> insert into notifications values <span class=\"token punctuation\">(</span><span class=\"token number\">2</span>, <span class=\"token number\">2</span>, <span class=\"token number\">2</span>, <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span> insert into notifications values <span class=\"token punctuation\">(</span><span class=\"token number\">3</span>, <span class=\"token number\">2</span>, <span class=\"token number\">2</span>, <span class=\"token string\">'hoge'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span> insert into notifications values <span class=\"token punctuation\">(</span><span class=\"token number\">4</span>, <span class=\"token number\">2</span>, <span class=\"token number\">2</span>, <span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span> insert into notifications values <span class=\"token punctuation\">(</span><span class=\"token number\">5</span>, <span class=\"token number\">2</span>, <span class=\"token number\">2</span>, <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span> insert into notifications values <span class=\"token punctuation\">(</span><span class=\"token number\">6</span>, <span class=\"token number\">2</span>, <span class=\"token number\">2</span>, <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span> insert into notifications values <span class=\"token punctuation\">(</span><span class=\"token number\">7</span>, <span class=\"token number\">2</span>, <span class=\"token number\">2</span>, <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span> insert into notifications values <span class=\"token punctuation\">(</span><span class=\"token number\">8</span>, <span class=\"token number\">2</span>, <span class=\"token number\">2</span>, <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span> insert into notifications values <span class=\"token punctuation\">(</span><span class=\"token number\">9</span>, <span class=\"token number\">2</span>, <span class=\"token number\">2</span>, <span class=\"token string\">'true'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span> insert into notifications values <span class=\"token punctuation\">(</span><span class=\"token number\">10</span>, <span class=\"token number\">2</span>, <span class=\"token number\">2</span>, <span class=\"token string\">'false'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> * from notifications<span class=\"token punctuation\">;</span>\n+----+------------+---------+---------+\n<span class=\"token operator\">|</span> <span class=\"token function\">id</span> <span class=\"token operator\">|</span> message_id <span class=\"token operator\">|</span> like_id <span class=\"token operator\">|</span> is_read <span class=\"token operator\">|</span>\n+----+------------+---------+---------+\n<span class=\"token operator\">|</span>  <span class=\"token number\">1</span> <span class=\"token operator\">|</span>          <span class=\"token number\">1</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span>          <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span>          <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">0</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span>          <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">0</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span>          <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">0</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span>          <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">7</span> <span class=\"token operator\">|</span>          <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">8</span> <span class=\"token operator\">|</span>          <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">0</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">9</span> <span class=\"token operator\">|</span>          <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">0</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">10</span> <span class=\"token operator\">|</span>          <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">0</span> <span class=\"token operator\">|</span>\n+----+------------+---------+---------+\n<span class=\"token number\">10</span> rows <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.21</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">1</code>,<code class=\"language-text\">0</code>,<code class=\"language-text\">true</code>,<code class=\"language-text\">false</code>,<code class=\"language-text\">&#39;1&#39;</code>,<code class=\"language-text\">&quot;1&quot;</code>を入れた場合は直感的。それ以外を入れた場合<code class=\"language-text\">0</code>に変換されてる。(例えば<code class=\"language-text\">&quot;hoge&quot;</code>など)<br>\nboolean 型を扱う場合、大人しく 0 か 1 を入れるのがよさそう。</p>\n<h2>参考文献</h2>\n<p><a href=\"https://dev.mysql.com/doc/refman/5.6/ja/boolean-literals.html\">https://dev.mysql.com/doc/refman/5.6/ja/boolean-literals.html</a></p>","frontmatter":{"title":"【MySQL】boolean型のカラムを追加する際のエラー「ERROR 1064 (42000) You have an error in your SQL syntax」","date":"2020年12月25日","description":"","tags":["mysql"]}}},"pageContext":{"slug":"/20201225-mysql-add-column/","previous":{"fields":{"slug":"/20201221-top-renewal/"},"frontmatter":{"title":"サイトのマイナーチェンジ","tags":["雑記"]}},"next":null}}}